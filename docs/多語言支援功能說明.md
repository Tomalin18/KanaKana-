# KanaKana 多語言支援功能說明

## 功能概述

KanaKana 現在支援多種語言，讓來自不同地區的用戶都能以自己熟悉的語言使用應用程式來學習日文。

## 支援的語言

目前支援以下五種語言：

1. **繁體中文 (zh_tw)** - 預設語言
2. **簡體中文 (zh_cn)** - 簡體中文版本
3. **英文 (en)** - English
4. **韓文 (ko)** - 한국어
5. **日文 (ja)** - 日本語

## 功能特點

### 自動語言檢測
- 應用程式會自動檢測用戶的系統語言
- 如果系統語言在支援列表中，會自動設定為對應語言
- 如果系統語言不支援，預設使用繁體中文

### 手動語言切換
- 用戶可以在設定中手動選擇語言
- 語言選擇會立即生效
- 語言設定會持久化儲存，下次開啟應用時會記住用戶的選擇

### 完整的國際化
- 所有用戶介面文字都已國際化
- 包括主選單、設定、遊戲模式、按鈕、提示訊息等
- 支援動態語言切換，無需重新啟動應用

## 如何使用

### 切換語言
1. 開啟 KanaKana 應用
2. 點擊主選單中的「設定」按鈕
3. 在設定畫面中找到「語言設定」區塊
4. 點擊「介面語言」選項
5. 在語言選擇器中選擇您想要的語言
6. 語言會立即切換，並顯示確認訊息

### 語言設定位置
- **主選單** → **設定** → **語言設定** → **介面語言**

## 技術實現

### 使用的技術
- **react-i18next**: React 國際化框架
- **i18next**: 核心國際化庫
- **expo-localization**: Expo 本地化支援
- **AsyncStorage**: 語言設定持久化

### 檔案結構
```
src/i18n/
├── index.ts              # 國際化主要設定
├── test.ts               # 測試檔案
└── locales/              # 語言檔案目錄
    ├── zh_tw.ts          # 繁體中文
    ├── zh_cn.ts          # 簡體中文
    ├── en.ts             # 英文
    ├── ko.ts             # 韓文
    └── ja.ts             # 日文
```

### 翻譯檔案結構
每個語言檔案都包含以下分類的翻譯：
- `common`: 通用文字（按鈕、標籤等）
- `mainMenu`: 主選單相關文字
- `gameSettings`: 遊戲設定相關文字
- `gamePlay`: 遊戲進行中相關文字
- `gameEnd`: 遊戲結束相關文字
- `settings`: 設定畫面相關文字
- `audio`: 音效設定相關文字
- `visual`: 視覺設定相關文字
- `accessibility`: 無障礙設定相關文字
- `language`: 語言設定相關文字
- `errors`: 錯誤訊息
- `success`: 成功訊息
- `confirm`: 確認對話框
- `hints`: 提示訊息
- `achievements`: 成就系統
- `statistics`: 統計資料
- `tutorial`: 教學相關
- `about`: 關於頁面

## 開發者指南

### 新增翻譯
1. 在 `src/i18n/locales/` 目錄下找到對應的語言檔案
2. 在適當的分類下新增翻譯鍵值對
3. 確保所有語言檔案都有相同的鍵值

### 在組件中使用翻譯
```typescript
import { useTranslation } from 'react-i18next';

const MyComponent = () => {
  const { t } = useTranslation();
  
  return (
    <Text>{t('common.start')}</Text>
  );
};
```

### 動態語言切換
```typescript
import { changeLanguage } from '@/i18n';

const handleLanguageChange = async (languageCode: string) => {
  try {
    await changeLanguage(languageCode);
    // 語言已切換
  } catch (error) {
    console.error('語言切換失敗:', error);
  }
};
```

### 獲取當前語言
```typescript
import { getCurrentLanguage } from '@/i18n';

const currentLanguage = getCurrentLanguage();
```

### 獲取支援的語言列表
```typescript
import { getSupportedLanguages } from '@/i18n';

const supportedLanguages = getSupportedLanguages();
```

## 測試

### 手動測試
1. 啟動應用程式
2. 進入設定畫面
3. 測試語言切換功能
4. 確認所有文字都正確翻譯
5. 重新啟動應用，確認語言設定被記住

### 自動測試
```typescript
import { testI18n } from '@/i18n/test';

// 在開發環境中執行測試
if (__DEV__) {
  testI18n();
}
```

## 注意事項

1. **語言檔案同步**: 新增翻譯時，請確保所有語言檔案都包含相同的鍵值
2. **文字長度**: 不同語言的文字長度可能不同，請注意 UI 佈局的適應性
3. **特殊字符**: 某些語言可能包含特殊字符，請確保字體支援
4. **文化適應**: 考慮不同文化的使用習慣，可能需要調整某些 UI 元素

## 未來擴展

- 支援更多語言（如法文、德文、西班牙文等）
- 新增語音朗讀功能
- 支援地區特定的日期和數字格式
- 新增語言學習進度追蹤
- 支援自訂翻譯

## 問題回報

如果您在使用多語言功能時遇到任何問題，請：
1. 檢查是否為最新版本
2. 嘗試重新安裝應用
3. 清除應用資料後重新設定語言
4. 向開發團隊回報問題，並提供詳細的錯誤訊息
