# kana 標點符號修復報告

## 🎯 問題重點

**kana 參數是判斷用戶打字內容的關鍵**，其中的標點符號會直接影響遊戲體驗，因為用戶無法在輸入框中輸入這些特殊符號。

## 📊 檢查結果

- **總計發現**: 42 個 kana 包含標點符號的詞彙
- **涉及文件**: 8 個詞彙文件
- **影響程度**: 高 - 這些詞彙會導致遊戲無法正常進行

## 🔍 kana 標點符號統計

| 標點符號 | 出現次數 | 影響程度 | 說明 |
|---------|---------|---------|------|
| `;` | 24 次 | 高 | 分號分隔多個讀音，用戶無法輸入 |
| `()` | 11 次 | 高 | 括號語法說明，不應該出現在輸入目標中 |
| `～` | 7 次 | 高 | 波浪號表示詞綴，無法輸入 |

## 📝 詳細問題詞彙列表

### 1. 分號 (;) 問題 - 24個

#### beginner_converted.ts (12個)
1. **いい; よい** → `"いい; よい"` ❌
2. **行く** → `"いく; ゆく"` ❌
3. **キロ; キログラム** → `"キロ; キログラム"` ❌
4. **そう; そうです** → `"そう; そうです"` ❌
5. **そうして; そして** → `"そうして; そして"` ❌
6. **毎月** → `"まいげつ; まいつき"` ❌
7. **毎年** → `"まいねん; まいとし"` ❌
8. **やはり; やっぱり** → `"やはり; やっぱり"` ❌
9. **お金持ち** → `"かねもち; おかねもち"` ❌
10. **高校; 高等学校** → `"こうこう; こうとうがっこう"` ❌
11. **けれど; けれども** → `"けれど; けれども"` ❌

#### normal 2.ts (5個)
1. **やはり; やっぱり** → `"やはり; やっぱり"` ❌
2. **レポート; リポート** → `"レポート; リポート"` ❌
3. **お金持ち** → `"かねもち; おかねもち"` ❌
4. **高校; 高等学校** → `"こうこう; こうとうがっこう"` ❌
5. **けれど; けれども** → `"けれど; けれども"` ❌
6. **コンピュータ; コンピューター** → `"コンピュータ; コンピューター"` ❌

#### hard 2.ts (1個)
1. **アイデア; アイディア** → `"アイデア; アイディア"` ❌

#### kanji-06.ts (2個)
1. **お金持ち** → `"かねもち; おかねもち"` ❌
2. **高校; 高等学校** → `"こうこう; こうとうがっこう"` ❌

#### kanji-07.ts (4個)
1. **行く** → `"いく; ゆく"` ❌
2. **何** → `"なん; なに"` ❌
3. **毎月** → `"まいげつ; まいつき"` ❌
4. **毎年** → `"まいねん; まいとし"` ❌

### 2. 括號 () 問題 - 11個

#### beginner_converted.ts (6個)
1. **結婚** → `"けっこん (する)"` ❌
2. **散歩** → `"さんぽ (する)"` ❌
3. **掃除** → `"そうじ (する)"` ❌
4. **勉強** → `"べんきょう (する)"` ❌
5. **練習** → `"れんしゅう (する)"` ❌

#### kanji-07.ts (5個)
1. **結婚** → `"けっこん (する)"` ❌
2. **散歩** → `"さんぽ (する)"` ❌
3. **掃除** → `"そうじ (する)"` ❌
4. **十** → `"(〜を) とお"` ❌
5. **勉強** → `"べんきょう (する)"` ❌
6. **練習** → `"れんしゅう (する)"` ❌

### 3. 波浪號 (～) 問題 - 7個

#### beginner_converted.ts (1個)
1. **建て** → `"～だて"` ❌

#### normal 2.ts (2個)
1. **来** → `"らい～"` ❌
2. **建て** → `"～だて"` ❌

#### expert 2.ts (1個)
1. **我** → `"が～"` ❌

#### kanji-01.ts (1個)
1. **我** → `"が～"` ❌

#### kanji-05.ts (1個)
1. **来** → `"らい～"` ❌

#### kanji-06.ts (1個)
1. **建て** → `"～だて"` ❌

## 🚨 遊戲影響分析

### 分號問題
- **問題**: 用戶需要輸入 `"いい; よい"` 才能過關
- **現實**: 用戶無法在輸入框中輸入分號
- **結果**: 遊戲無法進行，用戶困惑

### 括號問題
- **問題**: 用戶需要輸入 `"けっこん (する)"` 才能過關
- **現實**: 括號內容是語法說明，不應該輸入
- **結果**: 遊戲邏輯錯誤

### 波浪號問題
- **問題**: 用戶需要輸入 `"～だて"` 才能過關
- **現實**: 波浪號無法輸入，且語義不明確
- **結果**: 遊戲無法進行

## 🔧 修復方案

### 1. 分號詞彙修復
將包含分號的 kana 拆分為多個獨立詞彙：

```typescript
// 原始問題詞彙
{ word: "いい; よい", kana: "いい; よい" }

// 修復後 - 方案1：選擇主要讀音
{ word: "いい", kana: "いい" }
{ word: "よい", kana: "よい" }

// 修復後 - 方案2：保留為同義詞
{ word: "いい", kana: "いい" }
{ word: "よい", kana: "よい" }
```

### 2. 括號詞彙修復
移除括號內容，只保留核心讀音：

```typescript
// 原始問題詞彙
{ word: "結婚", kana: "けっこん (する)" }

// 修復後
{ word: "結婚", kana: "けっこん" }
```

### 3. 波浪號詞彙修復
提供完整的詞彙形式：

```typescript
// 原始問題詞彙
{ word: "建て", kana: "～だて" }

// 修復後 - 方案1：提供具體例子
{ word: "一建て", kana: "いちだて" }
{ word: "二建て", kana: "にだて" }

// 修復後 - 方案2：簡化為核心讀音
{ word: "建て", kana: "だて" }
```

## 📋 修復優先級

### 🔴 緊急修復 (立即影響遊戲)
1. **分號詞彙** - 24個，影響最大
2. **括號詞彙** - 11個，語法說明錯誤

### 🟡 重要修復 (需要語境處理)
1. **波浪號詞彙** - 7個，需要提供具體例子

## 🚀 實施計劃

### 第一階段：分號修復 (24個)
1. 識別每個分號詞彙的主要讀音
2. 將多個讀音拆分為獨立詞彙
3. 確保每個詞彙都有明確的輸入目標

### 第二階段：括號修復 (11個)
1. 移除所有括號內容
2. 保留核心讀音
3. 驗證修復後的詞彙語義

### 第三階段：波浪號修復 (7個)
1. 為每個波浪號詞彙提供具體例子
2. 或者簡化為核心讀音
3. 確保語義清晰

### 第四階段：測試驗證
1. 測試所有修復後的詞彙
2. 確保遊戲邏輯正常
3. 驗證用戶體驗

## ✅ 預期效果

修復完成後：
- **遊戲體驗**: 所有詞彙都可以正常輸入
- **學習效果**: 每個詞彙都有明確的學習目標
- **用戶滿意度**: 消除因標點符號造成的困惑
- **數據一致性**: kana 參數格式統一

## 🎯 修復原則

1. **用戶友好**: 確保用戶能夠正常輸入
2. **語義清晰**: 保持詞彙的學習價值
3. **數據完整**: 不丟失重要的語言信息
4. **遊戲兼容**: 符合遊戲的輸入邏輯

---

**總結**: 發現42個 kana 包含標點符號的詞彙，這些會直接影響遊戲體驗。建議按優先級立即修復，確保遊戲的正常進行。 